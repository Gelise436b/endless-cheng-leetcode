
---

# [2107] åˆ†äº« K ä¸ªç³–æœåç‹¬ç‰¹å£å‘³çš„æ•°é‡

## ğŸ“Œ é¢˜ç›®å¤§æ„
ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `candies` è¡¨ç¤ºæ¯é¢—ç³–æœçš„å£å‘³ï¼Œä»¥åŠä¸€ä¸ªæ•´æ•° `k`ã€‚  
ä½ éœ€è¦**ç§»é™¤ä¸€ä¸ªé•¿åº¦ä¸º `k` çš„è¿ç»­å­æ•°ç»„**ï¼ˆåˆ†ç»™æœ‹å‹ï¼‰ï¼Œä½¿å¾—**å‰©ä½™ç³–æœä¸­ä¸åŒå£å‘³çš„æ•°é‡æœ€å¤§**ã€‚  
è¿”å›è¿™ä¸ªæœ€å¤§å€¼ã€‚

> ç¤ºä¾‹ï¼š  
> `candies = [1,2,2,3,4,3], k = 3` â†’ æœ€ä¼˜ç§»é™¤ `[2,2,3]` æˆ– `[2,3,4]`ï¼Œå‰©ä½™ `{1,3,4}` æˆ– `{1,2,3}` â†’ ç­”æ¡ˆä¸º `3`

---

## âš ï¸ å¸¸è§è¯¯åŒºï¼ˆå…³é”®é™·é˜±ï¼‰

### âŒ é”™è¯¯æ€è·¯ï¼šæœ€å°åŒ–è¢«ç§»é™¤çª—å£çš„ç§ç±»æ•°
- **ç›´è§‰**ï¼šçª—å£ä¸­ç§ç±»è¶Šå°‘ â†’ æ‹¿èµ°çš„â€œå¤šæ ·æ€§â€è¶Šå°‘ â†’ å‰©ä½™ç§ç±»è¶Šå¤šã€‚
- **åä¾‹**ï¼š
  - `candies = [1,2,2,3,4,3], k=3`
  - çª—å£ `[3,4,3]` ç§ç±»æ•° = 2ï¼ˆçœ‹ä¼¼å¥½ï¼‰
    - ä½† `3` å’Œ `4` åœ¨å…¨å±€å‡åªå‡ºç° 1~2 æ¬¡ï¼Œä¸”**å…¨éƒ¨è¢«æ‹¿èµ°** â†’ å‰©ä½™ä»… `{1,2}` â†’ ç§ç±» = 2
  - çª—å£ `[2,2,3]` ç§ç±»æ•° = 2ï¼ˆç›¸åŒï¼‰
    - `2` è¢«å…¨æ‹¿ï¼Œä½† `3` è¿˜å‰©ä¸€ä¸ª â†’ å‰©ä½™ `{1,3,4}` â†’ ç§ç±» = 3 âœ…
- **æ ¹æœ¬åŸå› **ï¼š  
  > **çª—å£åŒ…å«æŸå£å‘³ â‰  è¯¥å£å‘³è¢«å®Œå…¨ç§»é™¤**ã€‚  
  > åªæœ‰å½“ `çª—å£ä¸­è¯¥å£å‘³é¢‘æ¬¡ == å…¨å±€é¢‘æ¬¡` æ—¶ï¼Œå®ƒæ‰ä»å‰©ä½™éƒ¨åˆ†æ¶ˆå¤±ã€‚

---

## âœ… æ­£ç¡®è§£æ³•ï¼šç›´æ¥ç»´æŠ¤â€œå‰©ä½™éƒ¨åˆ†â€çš„å“ˆå¸ŒçŠ¶æ€

### ğŸ§  æ ¸å¿ƒæ€æƒ³
- ä¸åˆ†æâ€œè¢«æ‹¿èµ°çš„çª—å£â€ï¼Œè€Œæ˜¯**ç›´æ¥ç»´æŠ¤â€œå‰©ä¸‹çš„ nâˆ’k ä¸ªå…ƒç´ â€çš„é¢‘æ¬¡å“ˆå¸Œè¡¨**ï¼›
- æ»‘åŠ¨â€œè¢«æ‹¿èµ°çš„çª—å£â€æ—¶ï¼ŒåŠ¨æ€æ›´æ–°å‰©ä½™é›†åˆï¼š
  - **çª—å£å³ç§»** â‡’
    - åŸçª—å£å·¦è¾¹ç•Œ **é‡Šæ”¾** â†’ **åŠ å…¥å‰©ä½™é›†**
    - æ–°çª—å£å³è¾¹ç•Œ **å ç”¨** â†’ **ä»å‰©ä½™é›†ç§»é™¤**
- å‰©ä½™é›†åˆçš„ `map.size()` å³ä¸ºå½“å‰æ–¹æ¡ˆä¸‹çš„ç‹¬ç‰¹å£å‘³æ•°ï¼Œå–æœ€å¤§å€¼å³å¯ã€‚

### ğŸ” ç®—æ³•æ­¥éª¤
1. è‹¥ `k >= n`ï¼Œè¿”å› `0`ï¼ˆå…¨éƒ¨è¢«æ‹¿èµ°ï¼‰ï¼›
2. åˆå§‹åŒ– `remaining` å“ˆå¸Œè¡¨ä¸º `candies[k:]`ï¼ˆå³æ‹¿èµ°å‰ `k` ä¸ªï¼‰ï¼›
3. è®°å½•åˆå§‹ç­”æ¡ˆ `res = remaining.size()`ï¼›
4. æ»‘åŠ¨çª—å£ï¼š`i` ä» `1` åˆ° `nâˆ’k`ï¼ˆå…± `nâˆ’k` æ¬¡ï¼‰ï¼š
   - `++remaining[candies[iâˆ’1]]`ï¼šå°†åŸå·¦è¾¹ç•ŒåŠ å›å‰©ä½™ï¼›
   - `--remaining[candies[i+kâˆ’1]]`ï¼Œè‹¥å‡è‡³ 0 åˆ™ `erase`ï¼šå°†æ–°å³è¾¹ç•Œç§»å‡ºå‰©ä½™ï¼›
   - æ›´æ–° `res = max(res, (int)remaining.size())`ï¼›
5. è¿”å› `res`ã€‚

### ğŸ’¡ ä»£ç å®ç°ï¼ˆC++ï¼‰

```cpp
class Solution {
public:
    int shareCandies(vector<int>& candies, int k) {
        int n = candies.size();
        if (k >= n) return 0;

        unordered_map<int, int> remaining;
        // åˆå§‹ï¼šæ‹¿èµ° [0, k-1]ï¼Œå‰©ä¸‹ [k, n-1]
        for (int i = k; i < n; ++i) {
            remaining[candies[i]]++;
        }

        int res = remaining.size();

        // æ»‘åŠ¨æ‹¿èµ°çª—å£ï¼š[0,k-1] â†’ [1,k] â†’ ... â†’ [n-k, n-1]
        for (int i = 1; i <= n - k; ++i) {
            remaining[candies[i - 1]]++;               // é‡Šæ”¾å·¦è¾¹ç•Œ
            if (--remaining[candies[i + k - 1]] == 0) // å ç”¨æ–°å³è¾¹ç•Œ
                remaining.erase(candies[i + k - 1]);
            res = max(res, (int)remaining.size());
        }
        return res;
    }
};
```

### âœ… å¤æ‚åº¦
- æ—¶é—´ï¼šO(n)
- ç©ºé—´ï¼šO(n)

---

## ğŸ§ª å…³é”®æµ‹è¯•ç”¨ä¾‹éªŒè¯

| è¾“å…¥ | `candies = [1,2,2,3,4,3]`, `k = 3` |
|------|-----------------------------------|
| å…¨å±€ç§ç±» | {1,2,3,4} â†’ 4 |
| æœ€ä¼˜çª—å£ | `[2,2,3]` æˆ– `[2,3,4]` |
| å‰©ä½™é›†åˆ | `{1,3,4}` æˆ– `{1,2,3}` |
| è¾“å‡º | **3** âœ… |

---

## ğŸ“š æ€»ç»“ä¸è¿ç§»

- **é€‚ç”¨åœºæ™¯**ï¼š  
  > â€œåˆ é™¤ä¸€æ®µè¿ç»­å­æ•°ç»„åï¼Œæœ€å¤§åŒ–å‰©ä½™éƒ¨åˆ†çš„å¤šæ ·æ€§/å’Œ/å­˜åœ¨æ€§â€ç±»é—®é¢˜ã€‚
  
- **å»ºæ¨¡èŒƒå¼**ï¼š  
  - å½“ç­”æ¡ˆä¾èµ–**çª—å£å¤–éƒ¨çŠ¶æ€**æ—¶ï¼Œ**ä¼˜å…ˆç›´æ¥ç»´æŠ¤å‰©ä½™é›†**ï¼Œè€Œéé€šè¿‡çª—å£å†…éƒ¨æ¨å¯¼ï¼›
  - é¿å…é™·å…¥â€œè¡¥é›†ç§ç±»æ•° = æ€»ç§ç±» âˆ’ çª—å£ç§ç±»â€çš„é€»è¾‘é™·é˜±ã€‚

- **å¯è¿ç§»é¢˜ç›®**ï¼š  
  - å­—ç¬¦ä¸²ä¸­åˆ é™¤ k ä¸ªè¿ç»­å­—ç¬¦åæœ€å¤§ä¸åŒå­—ç¬¦æ•°ï¼›
  - æ•°ç»„ä¸­ç§»é™¤ k ä¸ªè¿ç»­å…ƒç´ åå‰©ä½™å…ƒç´ çš„æœ€å¤§å¼‚æˆ–ç§ç±»ç­‰ã€‚

---

> **ä¸€å¥è¯å£è¯€**ï¼š  
> **â€œæ±‚å‰©ä½™ï¼Œä¸æ±‚çª—å£ï¼›æ»‘åŠ¨æ‹¿èµ°ï¼Œåå‘æ›´æ–°ã€‚â€**

--- 

