
---

### ğŸ“ å•é¢˜ç¬”è®°ï¼š[3439] é‡æ–°å®‰æ’ä¼šè®®å¾—åˆ°æœ€å¤šç©ºä½™æ—¶é—´ I

#### ğŸ¯ é¢˜æ„ç®€è¿°  
- ç»™å®šæ€»æ—¶é—´åŒºé—´ `[0, eventTime]`ï¼›  
- æœ‰ `n` åœº**å·²æ’å¥½åºã€äº’ä¸é‡å **çš„ä¼šè®®ï¼Œç¬¬ `i` åœºåœ¨ `[startTime[i], endTime[i])` ä¸¾è¡Œï¼›  
- ä½ å¯ä»¥**ç§»é™¤æ°å¥½ `k` åœºè¿ç»­çš„ä¼šè®®**ï¼ˆå¿…é¡»è¿ç»­ï¼ï¼‰ï¼›  
- **ç›®æ ‡**ï¼šæœ€å¤§åŒ–**å‰©ä½™æ—¶é—´æ®µä¸­çš„æœ€å¤§è¿ç»­ç©ºä½™æ—¶é—´**ï¼ˆåŒ…æ‹¬å¼€å¤´ã€ä¸­é—´é—´éš™ã€ç»“å°¾ï¼‰ã€‚

> ğŸ’¡ å…³é”®é™åˆ¶ï¼š**åªèƒ½ç§»é™¤ä¸€æ®µè¿ç»­çš„ `k` åœºä¼šè®®**ï¼Œä¸èƒ½ä»»æ„é€‰æ‹©ã€‚

---

#### âŒ åˆæœŸå¡ç‚¹ï¼ˆå…¸å‹å»ºæ¨¡ç›²åŒºï¼‰
> â€œå›°åœ¨åŸå§‹æ—¶é—´è½´ä¸Šï¼Œè¯•å›¾ç›´æ¥æ“ä½œä¼šè®®åŒºé—´ï¼Œå®Œå…¨æ²¡æƒ³åˆ°å°†é—®é¢˜è½¬åŒ–ä¸ºâ€˜ç©ºé—²æ®µæ•°ç»„ä¸Šçš„æ»‘çª—â€™ã€‚â€

**æ ¹æœ¬åŸå› **ï¼š  
- æœªè¯†åˆ«â€œç§»é™¤è¿ç»­ä¼šè®®â€ä¸â€œåˆå¹¶ç›¸é‚»ç©ºé—²æ®µâ€çš„ç­‰ä»·å…³ç³»ï¼›  
- ç¼ºä¹**ä»æ“ä½œæ•ˆæœåæ¨æ•°æ®ç»“æ„**çš„æ€ç»´ä¹ æƒ¯ã€‚

âœ… çªç ´å£ï¼š**å…³æ³¨â€œç§»é™¤æ“ä½œå¯¹ç©ºé—²æ—¶é—´çš„å½±å“â€ï¼Œè€Œéä¼šè®®æœ¬èº«**ã€‚

---

#### ğŸ§  æ ¸å¿ƒå»ºæ¨¡è½¬åŒ–ï¼ˆå…³é”®æ´å¯Ÿï¼‰

##### Step 1ï¼šæå–åŸå§‹ç©ºé—²æ®µ
å…±æœ‰ `n + 1` æ®µå¤©ç„¶ç©ºé—²æ—¶é—´ï¼š
- **å‰ç¼€ç©ºé—²**ï¼š`[0, startTime[0])` â†’ é•¿åº¦ = `startTime[0]`
- **ä¸­é—´ç©ºé—²**ï¼ˆ`i = 1` åˆ° `nâˆ’1`ï¼‰ï¼š`[endTime[iâˆ’1], startTime[i])` â†’ é•¿åº¦ = `startTime[i] âˆ’ endTime[iâˆ’1]`
- **åç¼€ç©ºé—²**ï¼š`[endTime[nâˆ’1], eventTime]` â†’ é•¿åº¦ = `eventTime âˆ’ endTime[nâˆ’1]`

è®°ç©ºé—²æ®µæ•°ç»„ä¸º `idle[0..n]`ï¼Œå…± `n+1` ä¸ªå…ƒç´ ã€‚

##### Step 2ï¼šç†è§£ç§»é™¤ `k` åœºè¿ç»­ä¼šè®®çš„æ•ˆæœ
- ç§»é™¤ä¼šè®® `[i, i+kâˆ’1]`ï¼ˆå…± `k` åœºï¼‰  
  â‡¨ å°†ç©ºé—²æ®µ `[i, i+k]`ï¼ˆå…± `k+1` æ®µï¼‰**åˆå¹¶ä¸ºä¸€ä¸ªè¿ç»­ç©ºé—²å—**ï¼›  
  â‡¨ åˆå¹¶åçš„ç©ºé—²æ—¶é•¿ = `idle[i] + idle[i+1] + ... + idle[i+k]`ã€‚

> âœ… å› æ­¤ï¼Œé—®é¢˜ç­‰ä»·äºï¼š  
> **åœ¨é•¿åº¦ä¸º `n+1` çš„æ•°ç»„ `idle[]` ä¸Šï¼Œæ±‚é•¿åº¦ä¸º `k+1` çš„è¿ç»­å­æ•°ç»„çš„æœ€å¤§å’Œã€‚**

---

#### ğŸ›  è§£æ³•ï¼šå®šé•¿æ»‘åŠ¨çª—å£ï¼ˆçª—å£é•¿åº¦ = k + 1ï¼‰

- ä½¿ç”¨è¾…åŠ©å‡½æ•° `get(i)` åŠ¨æ€è®¡ç®—ç¬¬ `i` ä¸ªç©ºé—²æ®µé•¿åº¦ï¼ˆé¿å…æ˜¾å¼æ„é€ æ•°ç»„ï¼ŒèŠ‚çœç©ºé—´ï¼‰ï¼›
- ç»´æŠ¤çª—å£å’Œ `s`ï¼Œçª—å£é•¿åº¦å›ºå®šä¸º `k + 1`ï¼›
- éå†æ‰€æœ‰å¯èƒ½çš„èµ·å§‹ä½ç½® `i âˆˆ [0, nâˆ’k]`ï¼ˆå¯¹åº”ç§»é™¤ä¼šè®® `[i, i+kâˆ’1]`ï¼‰ï¼›
- è®°å½•æœ€å¤§çª—å£å’Œå³ä¸ºç­”æ¡ˆã€‚

#### âœ… å‚è€ƒä»£ç è§£æ
```cpp
class Solution {
public:
    int maxFreeTime(int eventTime, int k, vector<int>& startTime, vector<int>& endTime) {
        int n = startTime.size();
        // è¾…åŠ©å‡½æ•°ï¼šè¿”å›ç¬¬ i ä¸ªç©ºé—²æ®µé•¿åº¦ï¼ˆi âˆˆ [0, n]ï¼‰
        auto get = [&](int i) -> int {
            if (i == 0) return startTime[0];                     // å‰ç¼€
            if (i == n) return eventTime - endTime[n - 1];       // åç¼€
            return startTime[i] - endTime[i - 1];                // ä¸­é—´é—´éš™
        };

        int ans = 0, windowSum = 0;
        // æ»‘åŠ¨çª—å£ï¼šé•¿åº¦ = k + 1ï¼ˆå¯¹åº”ç§»é™¤ k åœºä¼šè®®ï¼‰
        for (int i = 0; i <= n; ++i) {
            windowSum += get(i);          // åŠ å…¥å³è¾¹ç•Œ
            if (i < k) continue;          // çª—å£æœªæ»¡ï¼ˆéœ€ k+1 ä¸ªå…ƒç´ ï¼‰
            ans = max(ans, windowSum);    // æ›´æ–°æœ€å¤§ç©ºé—²æ—¶é—´
            windowSum -= get(i - k);      // æ»‘å‡ºå·¦è¾¹ç•Œ
        }
        return ans;
    }
};
```

> âš ï¸ **æ³¨æ„**ï¼šå¾ªç¯ä¸­ `i` ä» `0` åˆ° `n`ï¼ˆå…± `n+1` æ¬¡ï¼‰ï¼Œå½“ `i â‰¥ k` æ—¶çª—å£å¤§å°æ°ä¸º `k+1`ã€‚

---

#### âš ï¸ æ˜“é”™ç‚¹ & è¾¹ç•Œå¤„ç†
| é™·é˜± | æ­£ç¡®å¤„ç† |
|------|--------|
| æ»‘çª—é•¿åº¦è¯¯è®¾ä¸º `k` | åº”ä¸º `k + 1`ï¼ˆ`k` åœºä¼šè®® â†’ `k+1` ä¸ªç©ºé—²æ®µåˆå¹¶ï¼‰ |
| å¿½ç•¥é¦–å°¾ç©ºé—²æ®µ | `get(0)` å’Œ `get(n)` å¿…é¡»åŒ…å« |
| å¾ªç¯ç»ˆæ­¢æ¡ä»¶é”™è¯¯ | `i` éœ€éå†åˆ° `n`ï¼ˆæœ€åä¸€ä¸ªç©ºé—²æ®µç´¢å¼•ï¼‰ |
| æœªå¤„ç† `k = 0` æˆ– `k = n` | ä»£ç å¤©ç„¶æ”¯æŒï¼š`k=0` â†’ çª—å£é•¿ 1ï¼›`k=n` â†’ çª—å£è¦†ç›–å…¨éƒ¨ `n+1` æ®µ |

---

#### ğŸŒŸ æ€æƒ³å‡å
- **æ“ä½œ â†’ ç»“æ„è½¬åŒ–**ï¼šå°†â€œç§»é™¤è¿ç»­ä¼šè®®â€è½¬åŒ–ä¸ºâ€œåˆå¹¶è¿ç»­ç©ºé—²æ®µâ€ï¼Œå†æŠ½è±¡ä¸ºæ•°ç»„å­æ®µå’Œé—®é¢˜ï¼›
- **éšå¼æ•°ç»„æŠ€å·§**ï¼šç”¨ lambda å‡½æ•° `get(i)` é¿å… O(n) ç©ºé—´ï¼Œä½“ç°â€œæŒ‰éœ€è®¡ç®—â€æ€æƒ³ï¼›
- **æ»‘çª—é€‚ç”¨æ€§åˆ¤æ–­**ï¼šå½“æ“ä½œå¯¼è‡´**è¿ç»­è‹¥å¹²å•å…ƒåˆå¹¶**ï¼Œä¸”ç›®æ ‡ä¸º**åˆå¹¶åæ€»å’Œæœ€å¤§**æ—¶ï¼Œä¼˜å…ˆè€ƒè™‘å®šé•¿æ»‘çª—ï¼›
- **å‚æ•°å¯¹é½æ„è¯†**ï¼šåŸå§‹æ“ä½œæ•°ï¼ˆ`k` åœºä¼šè®®ï¼‰ä¸æ»‘çª—é•¿åº¦ï¼ˆ`k+1` æ®µç©ºé—²ï¼‰éœ€ä¸¥æ ¼å¯¹åº”ã€‚

---

#### ğŸ” å¯¹æ¯”åŒç±»é¢˜
| é¢˜ç›® | åŸå§‹æ“ä½œ | è½¬åŒ–ç»“æ„ | æ»‘çª—ç›®æ ‡ |
|------|--------|--------|--------|
| [3439] ç§»é™¤ä¼šè®® | ç§»é™¤ `k` åœºè¿ç»­ä¼šè®® | ç©ºé—²æ®µæ•°ç»„ `idle[0..n]` | é•¿åº¦ `k+1` å­æ•°ç»„æœ€å¤§å’Œ |
| [2107] åˆ†äº«ç³–æœ | ç§»é™¤ `k` ä¸ªè¿ç»­ç³–æœ | å‰©ä½™é¢‘æ¬¡å“ˆå¸Œè¡¨ | å‰©ä½™ç§ç±»æ•°æœ€å¤§ |
| [1151] èšåˆ 1 | äº¤æ¢ä½¿ `k` ä¸ª 1 è¿ç»­ | 0/1 æ•°ç»„ | é•¿åº¦ `totalOnes` çª—å£å†… 0 æœ€å°‘ |

> âœ… å…±æ€§ï¼š**è¯†åˆ«â€œæ“ä½œå¼•å‘çš„ç»“æ„å˜åŒ–â€æ˜¯å»ºæ¨¡æˆåŠŸçš„å…³é”®ã€‚**

---

> ğŸ“Œ **ä¸€å¥è¯æ€»ç»“**ï¼š  
> **ç§»é™¤ `k` åœºè¿ç»­ä¼šè®® â‡¨ åˆå¹¶ `k+1` æ®µç©ºé—²æ—¶é—´ â‡¨ å®šé•¿æ»‘çª—æ±‚æœ€å¤§å’Œã€‚**
